function showForm(){$("#background").addClass("grayout"),$("#formArea").toggle(),$("#form").append("<button id='cancel' class='btn btn-danger' type='button' onclick='cancelNewTicket()'>Cancel</button>")}function cancelNewTicket(){$("#background").removeClass("grayout"),$("#formArea").toggle(),$("#cancel").remove()}function renderTickets(){var t=JSON.parse(localStorage.getItem("tickets"));null!==t&&t.forEach(function(e){if("no"===e[3]){if("yes"===e[4]){var o="<div class='ticket-working'><h3 class='title'>"+e[1]+" - Working</h3><br><p class='desc'>"+e[2]+"</p><button class='btn btn-success' type='button' onclick='moveComplete("+t.indexOf(e)+")'>Completed</button> <button class='btn btn-warning' type='button' onclick='working("+t.indexOf(e)+")'>Stopped working on it!</button> <button class='btn btn-primary' type='button' onclick='editTicket("+t.indexOf(e)+")'>Edit ticket</button> <button class='btn btn-danger' type='button' onclick='removeTicket("+e[0]+")'>Remove</button> </div>";$("#ticketArea").append(o)}else if("no"===e[4]){o="<div class='ticket'><h3 class='title'>"+e[1]+"</h3><br><p class='desc'>"+e[2]+"</p><button class='btn btn-success' type='button' onclick='moveComplete("+t.indexOf(e)+")'>Completed</button> <button class='btn btn-warning' type='button' onclick='working("+t.indexOf(e)+")'>Working On It!</button> <button class='btn btn-primary' type='button' onclick='editTicket( "+t.indexOf(e)+" )'>Edit ticket</button> <button class='btn btn-danger' type='button' onclick='removeTicket("+e[0]+")'>Remove</button> </div>";$("#ticketArea").append(o)}}else{o="<div class='ticket'><h3 class='title'>"+e[1]+"</h3><br><p class='desc'>"+e[2]+"</p> <button class='btn btn-success' type='button' onclick='moveComplete("+t.indexOf(e)+")'>un-completed</button> <button class='btn btn-danger' type='button' onclick='removeTicket("+e[0]+")'>Remove</button> </div>";$("#completedArea").append(o)}})}function newTicket(){var t=$("#title").val(),e=$("#desc").val();if(null===JSON.parse(localStorage.getItem("tickets"))){var o=[n=[1,t,e,"no","no"]];localStorage.setItem("tickets",JSON.stringify(o))}else{var n=[(o=JSON.parse(localStorage.getItem("tickets"))).length+1,t,e,"no","no"];o.push(n),localStorage.setItem("tickets",JSON.stringify(o))}$("#cancel").remove(),$("#formArea").toggle(),$("#background").removeClass("grayout"),location.reload()}function clearList(){localStorage.clear(),location.reload()}function moveComplete(t){var e=JSON.parse(localStorage.getItem("tickets")),o=e[t];"no"===o[3]?o[3]="yes":"yes"===o[3]&&(o[3]="no"),e.splice(t,1),e.splice(t,0,o),localStorage.setItem("tickets",JSON.stringify(e)),location.reload()}function working(t){var e=JSON.parse(localStorage.getItem("tickets")),o=e[t];"no"===o[4]?o[4]="yes":"yes"===o[4]&&(o[4]="no"),e.splice(t,1),e.splice(t,0,o),localStorage.setItem("tickets",JSON.stringify(e)),location.reload()}function editTicket(t){$("#formArea").toggle(),$("#background").addClass("grayout");var e=JSON.parse(localStorage.getItem("tickets")),o=e[t],n=o[1],c=o[2];$("#title").val(n),$("#desc").val(c),e.splice(t,1),localStorage.setItem("oldContent",JSON.stringify([n,c])),localStorage.setItem("tickets",JSON.stringify(e));var a="<button class='btn btn-danger cancelButton' type='button' onclick='editCancel("+t+")'>Cancel</button>";$("#form").append(a)}function editCancel(t){var e=JSON.parse(localStorage.getItem("tickets")),o=JSON.parse(localStorage.getItem("oldContent")),n=[t+1,o[0],o[1],"no","no"];e.splice(t,0,n),localStorage.setItem("tickets",JSON.stringify(e)),$(".cancelButton").remove(),$("#background").removeClass("grayout"),location.reload()}function removeTicket(t){var e=JSON.parse(localStorage.getItem("tickets"));e.forEach(function(o){t===o[0]&&(e.splice(e.indexOf(o),1),localStorage.setItem("tickets",JSON.stringify(e)),location.reload())})}$(document).ready(function(){renderTickets(),$("#formArea").is(":visible")&&$("#formArea").toggle()});